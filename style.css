.hidden {
    opacity: 0;
    pointer-events: none;
    visibility: hidden;
    transition: opacity 0.6s ease, visibility 0.6s ease;
}

body {
    margin: 0;
    background: #f7e6d5;
    font-family: 'Georgia';
    overflow-x: hidden;
    overflow-y: auto;
}

/* INTRO */
#intro {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    height: 100vh;
    transition: opacity 0.6s ease, transform 0.6s ease;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 20;
}

#intro.fade-out {
    opacity: 0;
    transform: translateY(-20px);
    pointer-events: none;
}

#heartButton {
    font-size: 80px;
    cursor: pointer;
    animation: none;
    display: flex;
    align-items: center;
    justify-content: center;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

/* CONTENT */
.hidden {
    /* keep element in layout but invisible */
    opacity: 0 !important;
    visibility: hidden !important;
    pointer-events: none !important;
}

#content {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    min-height: auto;
    opacity: 0;
    transition: opacity 0.6s ease;
    pointer-events: none;
    padding: 30px 20px;
    gap: 20px;
    position: relative;
}

#content.content-visible {
    opacity: 1;
    pointer-events: auto;
}

#textBox {
    width: 100%;
    max-width: 600px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    text-align: center;
    order: 1;
}

#loveText {
    /* Revertimos a la fuente original (Georgia) y su tamaño */
    font-size: 22px;
    line-height: 1.5;
    color: #8B4848;
    margin: 0;
    white-space: pre-wrap; /* Respeta los saltos de línea del texto */
}

/* Cursor parpadeante para el efecto de máquina de escribir */
.cursor {
    display: inline-block;
    background-color: #8B4848;
    margin-left: 2px;
    width: 10px;
    height: 20px; /* Altura similar a la fuente */
    animation: blink 1s step-end infinite;
}

@keyframes blink {
    from, to { background-color: transparent; }
    50% { background-color: #8B4848; }
}

#timer {
    font-size: 18px;
    font-weight: bold;
    color: #8B4848;
    margin-top: 0;
    order: 3;
    opacity: 0;
    transition: opacity 0.8s ease;
}

#timer.visible {
    opacity: 1;
}

#timer span {
    font-size: 28px;
    color: #c9394a;
    padding: 0 4px;
}

/* Estilos para la dedicatoria y la firma */
#dedication-text {
    order: 4; /* ¡La clave! Se posiciona después del timer (order: 3) */
    width: 100%;
    max-width: 600px;
    text-align: center;
}

.signature {
    font-family: 'Brush Script MT', 'cursive'; /* Fuente más manuscrita */
    font-size: 26px; /* La hacemos más grande */
    font-style: normal; /* La fuente ya es cursiva, no necesita itálica extra */
    color: #c9394a; /* Un color rojo a juego con el corazón */
    opacity: 0; /* Empieza invisible */
    transition: opacity 0.8s ease;
}

.signature.visible {
    opacity: 1; /* Se hace visible con una transición suave */
}

#signature {
    color: #8B4848; /* Color cremita */
    margin-top: 10px; /* Separar un poco del texto superior */
    margin-bottom: 40px; /* Separar del timer */
}

/* Tree styles */
#treeContainer {
    filter: drop-shadow(0 4px 6px rgba(0,0,0,0.2));
    width: 600px;
    height: 600px;
    margin: 20px 0;
    padding: 0;
    opacity: 0;
    transition: opacity 1.5s ease;
    flex-shrink: 0;
    order: 2;
}

/* Mobile responsive */
@media (max-width: 768px) {
    #content {
        padding: 20px 15px;
        gap: 15px;
    }
    
    #treeContainer {
        width: 350px;
        height: 350px;
        margin: 15px 0;
    }
    
    #loveText {
        font-size: 18px;
    }
    
    #textBox {
        padding: 0 10px;
    }
    
    #timer {
        font-size: 16px;
    }
}

@media (max-width: 480px) {
    #content {
        padding: 15px 10px;
        gap: 10px;
    }
    
    #treeContainer {
        width: 280px;
        height: 280px;
        margin: 10px 0;
    }
    
    #loveText {
        font-size: 14px;
        line-height: 1.3;
    }
    
    #timer {
        font-size: 12px;
    }
}

/* Animación del tronco */
.trunk {
    stroke-dasharray: 1000;
    stroke-dashoffset: 1000;
    animation: drawTrunk 2s ease-out forwards;
}

@keyframes drawTrunk {
    to {
        stroke-dashoffset: 0;
    }
}

/* Animación de las ramas */
.branch {
    stroke-dasharray: 700;
    stroke-dashoffset: 700;
    animation: drawBranch 3s ease-out forwards;
    animation-delay: 2s;
}

@keyframes drawBranch {
    to {
        stroke-dashoffset: 0;
    }
}

/* Animación de los corazones */
.heart-svg {
    opacity: 0;
    transform-origin: center;
    animation: none;
}

@keyframes popHeart {
    0% {
        opacity: 0;
        transform: scale(0);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
}

/* Corazones que caen */
.falling-heart {
    position: absolute;
    pointer-events: none;
    user-select: none;
    line-height: 1;
    animation: fallDown var(--dur) ease-in forwards;
}

@keyframes fallDown {
    0%   { transform: translateY(0)              translateX(0)           rotate(0deg)   scale(1);    opacity: 1;   }
    20%  { transform: translateY(calc(var(--fall)*0.2)) translateX(var(--sw1))  rotate(14deg)  scale(0.95); opacity: 1;   }
    40%  { transform: translateY(calc(var(--fall)*0.4)) translateX(var(--sw2))  rotate(-10deg) scale(0.9);  opacity: 1;   }
    60%  { transform: translateY(calc(var(--fall)*0.6)) translateX(var(--sw3))  rotate(16deg)  scale(0.88); opacity: 0.85;}
    80%  { transform: translateY(calc(var(--fall)*0.8)) translateX(var(--sw4))  rotate(-5deg)  scale(0.8);  opacity: 0.4; }
    100% { transform: translateY(var(--fall))    translateX(var(--sw5))  rotate(8deg)   scale(0.7);  opacity: 0;   }
}